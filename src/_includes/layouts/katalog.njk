{% extends "layouts/base.njk" %}

{% block head %}
<style>
.checkbox:checked {
    background-color: #00A44F;
    border-color: #00A44F;
}
.checkbox:checked + .checkmark svg {
    opacity: 1;
}

/* Product Search Enhancements */
#search-autocomplete {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

#search-autocomplete::-webkit-scrollbar {
  width: 8px;
}

#search-autocomplete::-webkit-scrollbar-track {
  background: transparent;
}

#search-autocomplete::-webkit-scrollbar-thumb {
  background-color: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.search-result:first-child {
  border-radius: 6px 6px 0 0;
}

.search-result:last-child {
  border-radius: 0 0 6px 6px;
}

/* Search bar green background */
.bg-green-50 {
  background-color: #f0fdf4;
}
</style>
{% endblock %}

{% block body %}
<section class="py-16 ~px-4/8 bg-[#E92429]/20 lg:px-48">
  <div class="container m-auto max-w-3xl px-4 md:px-8 lg:px-0">
    <!-- Header -->
    <div class="mb-6 md:mb-8 mt-12 md:mt-16">
      <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-2 font-heading">{{ heading or title }}</h1>
      {% if topper %}<p class="text-sm md:text-md text-red-500 mb-4 font-body">{{ topper }}</p>{% endif %}
    </div>

    <!-- Product Search -->
    <div class="mb-8 md:mb-10">
      <div class="relative max-w-2xl">
        <label for="product-search" class="sr-only">Vyhledat produkt</label>
        
        <!-- Search Bar with Icon, Input, and Button -->
        <div class="flex items-center gap-2 bg-green-50 rounded-xl p-2">
          <!-- Magnifier Icon Box -->
          <div class="flex-shrink-0 w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 md:w-6 md:h-6 text-[#00A44F]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </div>
          
          <!-- Input Field (with autocomplete dropdown) -->
          <div class="relative flex-1">
            <input
              type="text"
              id="product-search"
              placeholder="Vyhledat produkt..."
              autocomplete="off"
              class="w-full px-4 py-2 md:py-3 bg-white rounded-lg border-2 border-transparent focus:border-[#00A44F] focus:outline-none text-base md:text-lg font-body transition-colors"
              aria-haspopup="listbox"
              aria-expanded="false"
              aria-controls="search-autocomplete"
            />
            
            <!-- Autocomplete Dropdown (unchanged) -->
            <div
              id="search-autocomplete"
              role="listbox"
              class="hidden absolute z-50 w-full mt-2 bg-white border-2 border-gray-200 rounded-lg shadow-xl max-h-96 overflow-y-auto left-0"
              aria-label="Návrhy produktů"
            >
              <!-- Suggestions injected by JS -->
            </div>
            
            <!-- No Autocomplete Results -->
            <div id="search-no-autocomplete" class="hidden absolute z-50 w-full mt-2 bg-white border-2 border-gray-200 rounded-lg shadow-lg px-4 py-3 left-0">
              <p class="text-gray-600 text-sm md:text-base font-body">Žádné produkty nenalezeny</p>
            </div>
          </div>
          
          <!-- Search Button -->
          <button
            type="button"
            id="search-button"
            class="flex-shrink-0 px-6 md:px-8 py-2 md:py-3 bg-[#00A44F] hover:bg-green-700 text-white font-semibold rounded-lg transition-colors text-base md:text-lg font-body"
          >
            Vyhledat
          </button>
        </div>
      </div>
    </div>
    
    <!-- Search Results Header (hidden by default) -->
    <div id="search-results-header" class="hidden mb-6 md:mb-8">
      <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-2 font-heading">
        Vyhledávání: "<span id="search-query-display"></span>"
      </h1>
      <nav class="text-sm text-gray-600" aria-label="Breadcrumb">
        <a href="/" class="hover:text-[#E92429]">Hlavní stránka</a>
        <span class="mx-2">»</span>
        <a href="/cs/katalog" class="hover:text-[#E92429]">Katalog</a>
        <span class="mx-2">»</span>
        <span>Vyhledávání: "<span id="search-query-breadcrumb"></span>"</span>
      </nav>
    </div>

    <!-- View Toggle Controls & Filters -->
    {% set allCatalogLabels = [] %}
    {% for product in collections.products %}
      {% if product.data.labels %}
        {% for label in product.data.labels %}
          {% set labelText = label.label if label.label else label %}
          {% if labelText and allCatalogLabels.indexOf(labelText) == -1 %}
            {% set allCatalogLabels = allCatalogLabels.concat([labelText]) %}
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}

    <div class="flex flex-row justify-between items-center gap-4 mb-6 lg:px-16">
      <!-- Filter Toggle (Left side) -->
      {% if allCatalogLabels.length > 0 %}
        <div class="flex items-center space-x-2" id="catalog-label-filters">
          <span class="text-base md:text-lg font-semibold font-heading">Filtry:</span>
          <button 
            id="filterToggleBtn" 
            type="button"
            class="filter-toggle-btn flex items-center justify-center w-10 h-10 md:w-12 md:h-12 bg-[#00A44F] hover:bg-[#008f43] text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#00A44F] focus:ring-offset-2"
            aria-expanded="false"
            aria-controls="filterPanel"
            aria-label="Zobrazit filtry"
            title="Zobrazit/skrýt filtry"
          >
            <!-- Filter Icon SVG -->
            <svg class="w-5 h-5 md:w-6 md:h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
            </svg>
          </button>
        </div>
      {% endif %}

      <!-- View Toggle (Right side) -->
      <div class="flex items-center space-x-2">
        <span class="text-base md:text-lg text-grey-800 font-body">Zobrazení:</span>
        <div class="flex border rounded overflow-hidden">
          <button id="gridViewBtn" class="view-toggle active px-2 py-1 bg-[#E92429] text-white transition-colors">
            <svg class="w-5 h-5 md:w-6 md:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
            </svg>
          </button>
          <button id="listViewBtn" class="view-toggle px-2 py-1 bg-white text-gray-600 hover:bg-gray-50 transition-colors">
            <svg class="w-5 h-5 md:w-6 md:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <line x1="8" y1="6" x2="21" y2="6"></line>
              <line x1="8" y1="12" x2="21" y2="12"></line>
              <line x1="8" y1="18" x2="21" y2="18"></line>
              <line x1="3" y1="6" x2="3.01" y2="6"></line>
              <line x1="3" y1="12" x2="3.01" y2="12"></line>
              <line x1="3" y1="18" x2="3.01" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Collapsible Filter Panel -->
    {% if allCatalogLabels.length > 0 %}
      <div class="mb-8 lg:px-16">
        
        <!-- Collapsible Filter Panel -->
        <div 
          id="filterPanel" 
          class="filter-panel"
          role="region"
          aria-labelledby="filterToggleBtn"
        >
          <div class="flex flex-wrap gap-3">
            <!-- Clear All Filter -->
            <button id="clearFilters" class="filter-tag active px-4 py-2 bg-[#00A44F] text-white rounded-full text-sm font-medium transition-colors hover:bg-green-700">
              Vše
            </button>
            
            <!-- Label Filter Tags (sorted alphabetically) -->
            {% set sortedLabels = allCatalogLabels | sort %}
            {% for label in sortedLabels %}
              <button class="filter-tag px-4 py-2 bg-white border-2 border-[#00A44F] text-[#00A44F] rounded-full text-sm font-medium transition-colors hover:bg-[#00A44F] hover:text-white" data-label="{{ label }}">
                #{{ label }}
              </button>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endif %}

    <!-- Grid View -->
    <div id="gridView" class="grid gap-6 lg:grid-cols-3 md:grid-cols-2 grid-cols-1 lg:px-16">
      {% set staticCategories = [
        {
          name: "Cyklovložky",
          slug: "cyklovlozky",
          description: "Naše cyklovložky kombinují pohodlí, odolnost a precizní zpracování, aby poskytovaly maximální komfort i při dlouhých jízdách.",
          image: "/assets/images/Katalog-imgs/divazus-fabric-store-6VJEqAemnIA-unsplash 1-1.png"
        },
        {
          name: "Dresoviny",
          slug: "dresoviny",
          description: "Funkční dresoviny spojují pružnost, prodyšnost a odvod vlhkosti, což zajišťuje optimální výkon a komfort při sportovní aktivitě.",
          image: "/assets/images/Katalog-imgs/divazus-fabric-store-6VJEqAemnIA-unsplash 1-2.png"
        },
        {
          name: "Tkaniny",
          slug: "tkaniny",
          description: "Široký sortiment tkanin spojujících funkčnost, odolnost a estetiku. Vybrané materiály jsou vhodné pro sériovou výrobu i individuální designové zakázky.",
          image: "/assets/images/Katalog-imgs/divazus-fabric-store-6VJEqAemnIA-unsplash 1-3.png"
        },
        {
          name: "Elastické úplety",
          slug: "elasticke-uplety",
          description: "Naše elastické úplety poskytují díky kvalitním vláknům a technologii zpracování vysokou pružnost a tvarovou stálost.",
          image: "/assets/images/Katalog-imgs/divazus-fabric-store-6VJEqAemnIA-unsplash 1-4.png"
        },
        {
          name: "Materiály s membránou",
          slug: "materialy-s-membranou",
          description: "Membránové materiály kombinují ochranu proti vodě a větru s prodyšností, což umožňuje komfort i při extrémních podmínkách.",
          image: "/assets/images/Katalog-imgs/divazus-fabric-store-6VJEqAemnIA-unsplash 1-5.png"
        },
        {
          name: "Pásky, gumy, reflexní materiály",
          slug: "pasky-gumy-reflexni-materialy", 
          description: "Kompletní doplňky, které dokonale doplní vaše výrobky – od pružných pásků a gum po reflexní prvky pro bezpečnost.",
          image: "/assets/images/Katalog-imgs/divazus-fabric-store-6VJEqAemnIA-unsplash 1-7.png"
        }
      ] %}
      
      {% for cat in staticCategories %}
        {% include "components/category-card.njk" %}
      {% endfor %}
    </div>

    <!-- List View -->
    <div id="listView" class="grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 hidden lg:px-16">
      {% for cat in staticCategories %}
        <div class="flex items-center justify-between px-3 md:px-4 py-3 md:py-4 border-dashed-custom rounded-lg bg-white hover:shadow-md transition-shadow gap-3">
          <div class="flex items-center space-x-3 md:space-x-6 flex-1 min-w-0">
            <div class="w-8 h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 bg-gray-100 rounded flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
            </div>
            <span class="text-base md:text-lg lg:text-xl font-bold text-gray-900 font-heading">{{ cat.name }}</span>
          </div>
          <a href="/cs/katalog/{{ cat.slug }}/" class="flex items-center justify-center flex-shrink-0 px-8 py-2 md:p-3 bg-[#00A44F] hover:bg-green-700 rounded transition-colors">
            <svg class="w-5 h-5 md:w-8 md:h-8 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
          </a>
        </div>
      {% endfor %}
    </div>
    
    <!-- Search Results Grid (hidden by default) -->
    <div id="searchResultsGrid" class="hidden">
      <div class="grid gap-6 lg:grid-cols-3 md:grid-cols-2 grid-cols-1 lg:px-16" id="products-container">
        <!-- Pre-rendered product cards for search results -->
        {% for p in collections.products %}
          {% set productLabels = [] %}
          {% if p.data.labels %}
            {% for label in p.data.labels %}
              {% set labelText = label.label if label.label else label %}
              {% set productLabels = productLabels.concat([labelText]) %}
            {% endfor %}
          {% endif %}
          <div class="search-product-card product-item" 
               data-title="{{ p.data.title | lower }}"
               data-category="{{ p.data.category }}"
               data-labels="{{ productLabels | join(',') }}"
               data-product-url="{{ p.url }}"
               style="display: none;">
            {% include "components/product-card.njk" %}
          </div>
        {% endfor %}
      </div>
    </div>
    
    <!-- Search Results Summary -->
    <div id="search-results-summary" class="hidden text-center mt-8 py-4">
      <p class="text-base md:text-lg text-gray-700 font-body">
        Výsledky vyhledávání obsahují <span id="search-results-count" class="font-semibold">0</span> položky.
      </p>
    </div>
    
    <!-- Filter Results Summary -->
    <div id="filter-results-summary" class="hidden text-center mt-8 py-4">
      <p class="text-base md:text-lg text-gray-700 font-body">
        Filtr zobrazuje <span id="filter-results-count" class="font-semibold">0</span> produktů.
      </p>
    </div>
    
    <!-- Filter Results Counter -->
    <div class="text-center mt-6 mb-4 lg:px-16">
      <p id="resultsCounter" class="text-base md:text-lg text-gray-700 font-body"></p>
    </div>
  </div>
</section>

<!-- CTA SECTION -->
<section class="py-6 md:py-10 lg:py-14 px-4 md:px-8 lg:px-48 bg-[#00A44F]">
        <div class="container m-auto flex flex-col md:flex-row justify-center md:justify-between items-center gap-5 md:gap-6">
            {% if cta2.heading2 %}<h2 class="text-2xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-0 text-center md:text-left text-white max-w-xs md:max-w-md lg:max-w-7xl font-heading leading-tight md:leading-tight lg:leading-tight">{{ cta2.heading2 | safe }}</h2>{% endif %}
            {% if cta2.btnCTA %}<a href="#contact-form" class="text-base md:text-xl lg:text-3xl flex px-5 md:px-10 lg:px-12 py-2.5 md:py-3.5 lg:py-4 rounded-xl bg-white text-[#00A44F] whitespace-nowrap font-body">{{ cta2.btnCTA }}</a>{% endif %}
        </div>
    </section>

<!-- CONTACT SECTION -->
<section class="py-8 md:py-16 lg:py-24 px-4 md:px-8 lg:px-48" id="contact-form">
    <div class="container m-auto">
        {% if contact.heading %}<h2 class="text-2xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-4 text-block leading-[1.1] font-heading">{{ contact.heading }}</h2>{% endif %}
        {% if contact.note %}<p class="text-lg md:text-xl text-neutral-600 mb-6 md:mb-8 text-block font-body">{{ contact.note }}</p>{% endif %}
        <form name="contact" method="POST" action="/kontakt/success/" data-netlify="true" data-netlify-honeypot="bot-field" class="grid md:grid-cols-2 gap-8 md:gap-12 lg:gap-24">
            <!-- Hidden fields for Netlify form processing -->
            <input type="hidden" name="form-name" value="contact" />
            <p class="sr-only">
                <label for="bot-field">Don't fill this out if you're human:</label>
                <input name="bot-field" id="bot-field" />
            </p>
            
            <div class="flex flex-col gap-3 md:gap-4">
                <label for="name" class="text-lg md:text-xl lg:text-2xl font-semibold font-body">Jméno *</label>
                <input type="text" id="name" name="name" required class="p-3 md:p-4 lg:p-5 border-2 border-gray-700 rounded-lg bg-gray-100 text-base md:text-lg font-body">

                <label for="surname" class="text-lg md:text-xl lg:text-2xl font-semibold font-body">Příjmení *</label>
                <input type="text" id="surname" name="surname" required class="p-3 md:p-4 lg:p-5 border-2 border-gray-700 rounded-lg bg-gray-100 text-base md:text-lg font-body">

                <label for="company" class="text-lg md:text-xl lg:text-2xl font-semibold font-body">Firma *</label>
                <input type="text" id="company" name="company" required class="p-3 md:p-4 lg:p-5 border-2 border-gray-700 rounded-lg bg-gray-100 text-base md:text-lg font-body">

                <label for="email" class="text-lg md:text-xl lg:text-2xl font-semibold font-body">Email *</label>
                <input type="email" id="email" name="email" required class="p-3 md:p-4 lg:p-5 border-2 border-gray-700 rounded-lg bg-gray-100 text-base md:text-lg font-body">

                <label for="phone" class="text-lg md:text-xl lg:text-2xl font-semibold font-body">Tel. Číslo</label>
                <input type="tel" id="phone" name="phone" class="p-3 md:p-4 lg:p-5 border-2 border-gray-700 rounded-lg bg-gray-100 text-base md:text-lg font-body">

                <div class="flex items-start gap-2 mt-2 md:mt-4">
                    <label for="policy" class="flex items-start cursor-pointer">
                        <input type="checkbox" id="policy" name="policy" required class="sr-only checkbox">
                        <span class="checkmark w-10 h-8 md:w-12 lg:w-14 md:h-10 lg:h-12 border-2 border-gray-300 flex items-center justify-center mt-1 flex-shrink-0">
                            <svg class="w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6 text-white opacity-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </span>
                        <span class="text-sm md:text-lg lg:text-xl text-black ml-2 leading-relaxed font-body">Tímto souhlasím se <a href="/gdpr/" class="text-[#00A44F] underline hover:text-green-700 transition-colors duration-300">Zásadami ochrany osobních údajů</a> a <span class="text-[#00A44F] underline">Zpracováním souborů cookies</span>.</span>
                    </label>
                </div>
            </div>
            <div class="flex flex-col gap-3 md:gap-4">
                <label for="message" class="text-lg md:text-xl lg:text-2xl font-semibold font-body">Zpráva *</label>
                <textarea id="message" name="message" rows="15" md:rows="18" lg:rows="22" required class="p-4 md:p-5 lg:p-7 border-2 border-gray-700 rounded-lg bg-gray-100 resize-none text-base md:text-lg min-h-[200px] md:min-h-[300px] font-body"></textarea>
                <button type="submit" class="mt-2 md:mt-4 text-lg md:text-2xl lg:text-4xl px-8 md:px-12 lg:px-16 py-3 md:py-4 lg:py-6 rounded-xl text-white bg-[#00A44F] self-center md:self-end font-body">Odeslat zprávu</button>
            </div>
        </form>
    </div>
</section>


<!-- FOOTER SECTION -->
<section class="bg-white py-8 md:py-12 px-4 md:px-8 lg:px-48">
        <div class="container m-auto">
            <svg 
                alt="Tessuti Logo" 
                class="mb-3 md:mb-4 w-48 md:w-64 h-auto"
                viewBox="0 0 2200 613.18"
                xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <style>
                      .cls-1 {
                        fill: #e92429;
                      }
                    </style>
                </defs>
                <g>
                    <g>
                        <g>
                            <g>
                                <path d="M677.95,438.76l59.12-225.67h-87.63l13.36-51.18h232.65l-13.74,51.18h-88.02l-59.12,225.67h-56.61Z"/>
                                <path d="M838.54,438.76l72.87-276.85h204.73l-13.36,51.18h-148.12l-16.2,61.65h130.67l-13.74,51.18h-130.67l-15.82,61.65h150.06l-13.74,51.18h-206.67Z"/>
                                <path d="M1079.51,368.58c.67-7.76,1.99-13.96,3.1-17.84h57c-.62,2.71-1.25,5.43-1.51,8.53-2.12,24.43,20.88,36.45,49.96,36.45,41.88,0,61.63-13.18,63.55-35.28,4.34-50.02-143.91-21.71-136.34-108.96,5.01-57.77,54.77-95,131.93-95,63.59,0,101.85,28.31,97.01,75.22-.61,6.98-2.44,14.73-3.52,18.22h-56.22c.59-2.33,1.25-5.43,1.55-8.92,2.66-21.71-13.55-36.06-45.34-36.06-40.33,0-61.48,15.9-63.2,35.67-4.34,50.02,145.39,22.49,137.51,108.96-5.26,56.22-46.59,94.61-133.06,94.61-70.96,0-106.03-33.73-102.4-75.61Z"/>
                                <path d="M1327.2,368.58c.67-7.76,1.99-13.96,3.1-17.84h57c-.62,2.71-1.25,5.43-1.51,8.53-2.12,24.43,20.88,36.45,49.96,36.45,41.88,0,61.63-13.18,63.55-35.28,4.34-50.02-143.91-21.71-136.34-108.96,5.01-57.77,54.77-95,131.93-95,63.59,0,101.85,28.31,97.01,75.22-.61,6.98-2.44,14.73-3.52,18.22h-56.22c.59-2.33,1.25-5.43,1.55-8.92,2.66-21.71-13.55-36.06-45.34-36.06-40.33,0-61.48,15.9-63.2,35.67-4.34,50.02,145.39,22.49,137.51,108.96-5.26,56.22-46.59,94.61-133.06,94.61-70.96,0-106.03-33.73-102.4-75.61Z"/>
                                <path d="M1591.11,329.03l43.96-167.12h56.22l-43.47,165.96c-11.62,44.59,5.63,64.75,51.38,64.75s69.32-21.33,80.87-65.14l43.44-165.57h57l-43.93,166.73c-21.48,82.2-66.63,115.55-147.67,115.55s-119.05-35.67-97.81-115.16Z"/>
                                <path d="M1911.63,438.76l59.12-225.67h-87.63l13.36-51.18h232.65l-13.74,51.18h-88.02l-59.12,225.67h-56.61Z"/>
                                <path d="M2070.52,438.76l72.87-276.85h56.61l-72.87,276.85h-56.61Z"/>
                            </g>
                            <g>
                                <path d="M1734.16,554.04s7.86,12.02,22.44,12.02c7.53,0,16.03-3.21,16.03-9.14,0-6.41-5.45-9.62-16.83-11.86-15.87-3.21-27.09-9.46-27.09-23.4,0-10.74,10.74-21.32,27.25-21.32,17.47,0,27.41,11.22,27.41,11.22l-8.81,9.14s-7.37-8.18-18.59-8.18c-9.46,0-14.11,4.65-14.11,9.46,0,5.61,5.77,8.66,17.95,11.22,14.49,3.13,26.78,8.62,26.1,24.65-.33,7.85-5.59,14.8-13,17.42-31.43,11.13-48.05-12.57-48.05-12.57l9.3-8.66Z"/>
                                <path d="M1826.52,502.26v10.74s7.37-12.67,25-12.67c20.03,0,35.9,17.15,35.9,38.96s-15.87,38.95-35.9,38.95c-13.62,0-21.32-7.7-23.88-11.06v46h-13.47v-110.92h12.34ZM1827.65,553.08s7.05,12.66,21.8,12.66,24.53-11.86,24.53-26.44-9.46-26.45-24.53-26.45-21.8,12.66-21.8,12.66v27.57Z"/>
                                <path d="M2056.45,502.26l-4.97,12.18s-2.89-1.6-8.5-1.6c-11.7,0-16.99,12.5-16.99,12.5v50.97h-13.47v-74.06h12.5v11.38s6.57-13.31,20.67-13.31c6.09,0,10.74,1.92,10.74,1.92Z"/>
                                <path d="M2078.11,502.28h14.42v-22.6h13.47v22.6h23.08v12.18h-23.08v39.92c0,7.21,3.53,11.38,10.74,11.38,4.17,0,8.5-3.04,8.5-3.04l4.97,11.06c-6.41,3.53-11.06,4.49-15.39,4.49-10.58,0-22.29-6.89-22.29-23.24v-40.56h-14.42v-12.18Z"/>
                                <path d="M1985.5,536.7c1.36,23-15.38,41.52-38.01,41.56-20.04.03-36.98-16.37-38.14-36.38-1.34-22.98,15.38-41.48,37.99-41.53,20.04-.04,36.98,16.34,38.16,36.35ZM1972.11,539.31c0-14.59-9.77-26.45-24.68-26.45s-24.69,11.86-24.69,26.45,9.78,26.44,24.69,26.44,24.68-11.86,24.68-26.44Z"/>
                            </g>
                            <path class="cls-1" d="M145.75,137.62C277.75,40.78,450.84,1.29,613.03,8.17c31.3,1.92,62.66,5.76,92.87,14.54-29.83-10.28-61.17-15.67-92.49-19.14C409.17-15.15,186.39,38.8,38.58,187.75c-11.29,11.58-21.89,23.82-31.81,36.59-6.37,7.23-7.91,16.77-6.03,24.74,2.22,9.4,9.14,16.99,18.3,20.08,4.37,1.48,15.7,3.9,26.96-5.1-2.49,2.11-5.29,3.74-8.2,4.76,9.99-3.5,42.78-20.43,145.17-37.18,59.17-9.68,107.53-13.07,143.73-10.07,34.68,2.87,55.55,12.84,62.53,24.79,29.24,50.04-67.8,164.61-86.02,189.26-25.87,35-103.35,120.79-103.35,120.79l228.24-.65s135.08-250.31,85.82-360.25c-17.22-38.44-48.2-53.81-103.85-59.54-24.73-2.55-74.26-3.3-88.69-1.33,18.61-25.61,201.61-120.02,384.51-83.41v-6.29c-163.13-52.63-412.62,12.13-560.15,92.7Z"/>
                        </g>
                    </g>
                </g>
            </svg>
            <h3 class="text-2xl md:text-3xl font-bold mb-3 md:mb-4 font-heading">{{ bottomSection.locationheading }}</h3>
            <div class="flex items-start mb-3 md:mb-4">
                <img src="/assets/images/hero/Vector (1).png" alt="" class="w-8 h-8 md:w-12 md:h-10 mr-3 md:mr-4 flex-shrink-0 mt-1">
                <p class="text-base md:text-xl font-body">{{ bottomSection.location | safe }}</p>
            </div>
            {% if bottomSection.provozovna %}
            <div class="flex items-start mb-6 md:mb-8">
                
                <div class="text-base md:text-xl font-body">
                    <p class="font-semibold mb-1">Provozovna:</p>
                    <p>{{ bottomSection.provozovna }}</p>
                </div>
            </div>
            {% endif %}
            <div class="grid md:grid-cols-2 gap-8 md:gap-16 lg:gap-36">
                <div>
                    <h4 class="text-2xl md:text-3xl font-semibold mb-3 md:mb-4 font-heading">{{ bottomSection.contactheading }}</h4>
                    <ul class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-6">
                        <li class="flex items-center text-lg md:text-2xl font-body">
                            <img src="/assets/images/hero/Vector (2).png" alt="" class="w-6 h-6 md:w-8 md:h-8 mr-2 flex-shrink-0">
                            <span class="break-all">{{ bottomSection.web }}</span>
                        </li>
                        <li class="flex items-center text-lg md:text-2xl font-body">
                            <img src="/assets/images/hero/Vector (3).png" alt="" class="w-6 h-6 md:w-8 md:h-8 mr-2 flex-shrink-0">
                            <span>{{ bottomSection.dic }}</span>
                        </li>
                        <li class="flex items-center text-lg md:text-2xl font-body">
                            <img src="/assets/images/hero/Vector (3).png" alt="" class="w-6 h-6 md:w-8 md:h-8 mr-2 flex-shrink-0">
                            <span>{{ bottomSection.ic }}</span>
                        </li>
                        <li class="flex items-center text-lg md:text-2xl font-body">
                            <img src="/assets/images/hero/Vector (4).png" alt="" class="w-6 h-6 md:w-8 md:h-8 mr-2 flex-shrink-0">
                            <a href="mailto:{{ bottomSection.mail }}" class="break-all hover:text-[#E92429] transition-colors duration-300 hover:underline">{{ bottomSection.mail }}</a>
                        </li>
                        <li class="flex items-center text-lg md:text-2xl font-body">
                            <i class="fa-regular fa-user w-6 h-6 md:w-8 md:h-8 mr-2 flex items-center justify-center text-xl md:text-2xl"></i>
                            <span>{{ bottomSection.osoba }}</span>
                        </li>
                        <li class="flex items-center text-lg md:text-2xl font-body">
                            <img src="/assets/images/hero/Vector (6).png" alt="" class="w-6 h-6 md:w-8 md:h-8 mr-2 flex-shrink-0">
                            <a href="tel:{{ bottomSection.tel2 }}" class="hover:text-[#E92429] transition-colors duration-300 hover:underline">{{ bottomSection.tel2 }}</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-2xl md:text-3xl font-semibold mb-3 md:mb-4 font-heading">{{ bottomSection.Catalogheading }}</h4>
                    <ul class="grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-3">
                        {% set categoryLinks = [
                            { heading: bottomSection.listheading1, url: "/cs/katalog/cyklovlozky/" },
                            { heading: bottomSection.listheading2, url: "/cs/katalog/tkaniny/" },
                            { heading: bottomSection.listheading3, url: "/cs/katalog/elasticke-uplety/" },
                            { heading: bottomSection.listheading4, url: "/cs/katalog/materialy-s-membranou/" },
                            { heading: bottomSection.listheading5, url: "/cs/katalog/pasky-gumy-reflexni-materialy/" },
                            { heading: bottomSection.listheading6, url: "/cs/katalog/dresoviny/" },
                            { heading: bottomSection.listheading7, url: "/cs/katalog/#contact-form" }
                        ] %}
                        {% for category in categoryLinks %}
                            {% if category.heading %}
                                <li>
                                    <a href="{{ category.url }}" class="text-lg md:text-2xl text-[#E92429] font-body hover:text-[#B8182A] transition-colors duration-300 hover:underline">{{ category.heading | safe }}</a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </section>

<!-- JavaScript for View Toggle -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const gridViewBtn = document.getElementById('gridViewBtn');
  const listViewBtn = document.getElementById('listViewBtn');
  const gridView = document.getElementById('gridView');
  const listView = document.getElementById('listView');

  function showGridView() {
    // Exit search mode when toggling views
    if (window.productSearch && window.productSearch.exitSearchMode) {
      window.productSearch.exitSearchMode();
    }
    // Exit filter mode when toggling views
    if (window.labelFilters && window.labelFilters.clearAllFilters) {
      window.labelFilters.clearAllFilters();
    }
    
    gridView.classList.remove('hidden');
    listView.classList.add('hidden');
    listView.classList.remove('grid');
    gridViewBtn.classList.add('active', 'bg-[#E92429]', 'text-white');
    gridViewBtn.classList.remove('bg-white', 'text-gray-600');
    listViewBtn.classList.remove('active', 'bg-[#E92429]', 'text-white');
    listViewBtn.classList.add('bg-white', 'text-gray-600');
  }

  function showListView() {
    // Exit search mode when toggling views
    if (window.productSearch && window.productSearch.exitSearchMode) {
      window.productSearch.exitSearchMode();
    }
    // Exit filter mode when toggling views
    if (window.labelFilters && window.labelFilters.clearAllFilters) {
      window.labelFilters.clearAllFilters();
    }
    
    gridView.classList.add('hidden');
    listView.classList.remove('hidden');
    listView.classList.add('grid');
    listViewBtn.classList.add('active', 'bg-[#E92429]', 'text-white');
    listViewBtn.classList.remove('bg-white', 'text-gray-600');
    gridViewBtn.classList.remove('active', 'bg-[#E92429]', 'text-white');
    gridViewBtn.classList.add('bg-white', 'text-gray-600');
  }

  gridViewBtn.addEventListener('click', showGridView);
  listViewBtn.addEventListener('click', showListView);

  // Initialize with grid view
  showGridView();
});
</script>

<!-- Filter Toggle Script -->
<script src="/assets/js/filter-toggle.js"></script>

<!-- Label Filters Script -->
<script src="/assets/js/label-filters.js"></script>

<!-- Product Search Script -->
<script src="/assets/js/product-search.js"></script>
{% endblock %}